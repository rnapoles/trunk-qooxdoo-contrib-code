<?xml version="1.0" encoding="utf-8"?>
<qxt:include-definition
	xmlns:qx="http://www.qooxdoo.org"
	xmlns:qxt="http://www.qxtransformer.sourceforge.net/extension">
	
	<!-- simple error log window -->		
	<qx:window 
		id="errorWindow" 
		width="400" height="200" 
		caption="Error" 
		showMinimize="false" showMaximize="false" showClose="false" 
		onAppear="this.centerToBrowser()">

		<!-- events and messages -->
		
		<qx:messageSubscriber filter="qcl.databinding.messages.rpc.error">
			message.getData() == false ? this.hide() : this.show();
		</qx:messageSubscriber>
		
		<!-- content -->
		
		<qx:verticalBoxLayout 
			spacing="5" padding="5" 
			width="100%" height="100%">

			<qx:atom 
				id="errorText" 
				icon="icon/32/status/dialog-warning.png"
				height="1*" width="100%"> 
				<qx:messageSubscriber filter="qcl.databinding.messages.rpc.error">
					var msg = message.getData() || "";
					var msg = "<b>" + msg.replace(/\\n/,"<br/>") + "</b>";
					this.setLabel(msg);
				</qx:messageSubscriber>
			</qx:atom>								
			
			<qx:horizontalBoxLayout 
				width="100%" height="auto" 
				horizontalChildrenAlign="center"
				spacing="10">
				<qx:button label="OK" height="30" width="50">
					<qx:eventListener type="execute">
						errorWindow.hide();
					</qx:eventListener>
				</qx:button>
			</qx:horizontalBoxLayout>
			
		</qx:verticalBoxLayout>	

	</qx:window>
	
</qxt:include-definition>	