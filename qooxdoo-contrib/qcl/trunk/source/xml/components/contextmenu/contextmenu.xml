<?xml version="1.0" encoding="utf-8"?>
<qxt:include-definition
	xmlns:qx="http://www.qooxdoo.org"
	xmlns:qxt="http://www.qxtransformer.sourceforge.net/extension">
	
	<!-- context menu -->
	<qxt:script><![CDATA[
			// add contextmenu event handler to client document
			qx.ui.core.ClientDocument.getInstance().addEventListener("contextmenu",function(e){
		   		var target = e.getOriginalTarget();
				while ( target && typeof target=="object" && target.getParent )
				{
			        if ( target.getContextMenu && target.getContextMenu() )
			        {
				        var contextMenu = target.getContextMenu();
				        contextMenu.setLeft( e.getClientX() );
				        contextMenu.setTop( e.getClientY() );
				        contextMenu.setOpener( target );
				        contextMenu.show();
				        qx.event.message.Bus.dispatch("qcl.messages.contextmenu.opened",contextMenu);
				        return true;
				    }
				    else
				    {
				    	target = target.getParent();
				    }
			    } 
			},this);
			]]>
	</qxt:script>	
</qxt:include-definition>	