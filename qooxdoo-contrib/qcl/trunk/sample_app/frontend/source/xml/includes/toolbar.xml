<?xml version="1.0" encoding="utf-8"?>
<qxt:include-definition
	xmlns:qx="http://www.qooxdoo.org"
	xmlns:qxt="http://www.qxtransformer.sourceforge.net/extension">

	<!-- security policies for menu and toolbar -->
	<qx:security>
		<qx:permission name="sample_app.permissions.default.logout"/>
		<qx:permission name="sample_app.permissions.access.manage"/>
		<qx:permission name="sample_app.permissions.config.manage"/>
		<qx:permission name="sample_app.permissions.preferences.manage"/>
	</qx:security>
	
	<!-- toolbar -->
	<qx:toolBar width="100%" id="toolBar">

			<!-- file menu -->
			<qx:toolBarMenuButton text="Application">
			
				<qx:menu>
				
					<qx:menuButton text="Logout" 				
						enabled="false"
						enableOnPermission="sample_app.permissions.default.logout">
						<qx:eventListener type="execute" dispatchMessage="sample_app.messages.logout" />
					</qx:menuButton>
					
				</qx:menu>
				
			</qx:toolBarMenuButton>
					
			<!-- edit menu -->
			<qx:toolBarMenuButton text="Edit">
			
				<qx:menu>
				
					<qx:menuButton text="Copy" enabled="false" >
						<qx:eventListener type="execute" dispatchMessage="sample_app.commands.copy" />
					</qx:menuButton>

					<qx:menuButton text="Cut" enabled="false" >
						<qx:eventListener type="execute" dispatchMessage="sample_app.commands.cut" />
					</qx:menuButton>
					
					<qx:menuButton text="Paste" enabled="false" >
						<qx:eventListener type="execute" dispatchMessage="sample_app.commands.paste" />
					</qx:menuButton>
																		
					<qx:menuSeparator />
					
					<qx:menuButton text="Delete" enabled="false" >
						<qx:eventListener type="execute" dispatchMessage="qx.messages.paste.delete" />
					</qx:menuButton>													

				</qx:menu>
				
			</qx:toolBarMenuButton>
	
			<!-- Settings -->
			<qx:toolBarMenuButton text="Settings">
			
				<qx:menu>
				
					<qx:menuButton text="Manage Application Access"
						enabled="false"
						enableOnPermission="sample_app.permissions.access.manage">		
						<qx:eventListener type="execute" dispatchMessage="qcl.auth.commands.access.manage" />
					</qx:menuButton>

					<qx:menuButton text="Manage Application Configuration"
						enabled="false"
						enableOnPermission="sample_app.permissions.config.manage">		
						<qx:eventListener type="execute" dispatchMessage="qcl.config.commands.editor.show" />
					</qx:menuButton>
					
					<qx:menuSeparator />
					
					<qx:menuButton text="Preferences"
						enabled="false"
						enableOnPermission="sample_app.permissions.preferences.manage">		
						<qx:eventListener type="execute" dispatchMessage="qcl.config.commands.preferences.show" />
					</qx:menuButton>
														
				</qx:menu>
				
			</qx:toolBarMenuButton>
			
			<!-- spacer label with current user-->
			
			<qx:atom width="1*" 
				horizontalChildrenAlign="right"
				height="100%"
				paddingRight="10"
				verticalChildrenAlign="middle">
				<qx:messageSubscriber filter="qcl.auth.messages.changeActiveUser">
						// show user information
						var userdata = message.getData().getData();
						var userInfo = userdata.name + " (" + userdata.roles + ")";
						this.setLabel( userInfo );
						this.setIcon( "icon/16/" + userdata.icon );
				</qx:messageSubscriber>			
			</qx:atom>

			<!-- toolbar buttons -->
			
			<qx:toolBarButton 
				id="logoutButton"
				text="Logout" icon="icon/22/actions/application-exit.png" tooltip="Logout"
				enabled="false"
				enableOnPermission="sample_app.permissions.default.logout">
				<qx:eventListener type="execute" dispatchMessage="sample_app.messages.logout"/>
			</qx:toolBarButton>
			
	</qx:toolBar>

</qxt:include-definition>
	