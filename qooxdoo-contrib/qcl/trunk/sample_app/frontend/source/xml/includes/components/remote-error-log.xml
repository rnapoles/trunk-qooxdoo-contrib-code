<?xml version="1.0" encoding="utf-8"?>
<qxt:include-definition
	xmlns:qx="http://www.qooxdoo.org"
	xmlns:qxt="http://www.qxtransformer.sourceforge.net/extension">
	
	<!-- remote error log window -->		
	<qx:window 
		id="errorWindow" 
		width="400" height="200" 
		caption="Remote Error Log" 
		showMinimize="false" showMaximize="false" showClose="false" 
		onAppear="this.centerToBrowser()">

		<!-- events and messages -->
		
		<qx:messageSubscriber filter="error-*">
			message.getData() == false ? this.hide() : this.show();
		</qx:messageSubscriber>
		
		<!-- content -->
		
		<qx:verticalBoxLayout 
			spacing="5" padding="5" 
			width="100%" height="100%">

			<qx:textArea id="errorText" height="1*" width="100%"> 
				<qx:messageSubscriber filter="error-*">
					var msg = new Date() + ": " + message.getData();
					this.setValue(msg);
					this.setScrollTop ( 100000 );
				</qx:messageSubscriber>
				<qx:messageSubscriber filter="server.log">
					var msg = new Date() + ": " + message.getData();
					if (this.getValue()) msg = this.getValue() +  "\n" + msg;
					this.setValue(msg);
					this.setScrollTop ( 100000 );
				</qx:messageSubscriber>
				
			</qx:textArea>								
			
			<qx:horizontalBoxLayout 
				width="100%" height="auto" 
				horizontalChildrenAlign="center"
				spacing="10">
				<qx:button label="Clear">
					<qx:eventListener type="execute">
						errorText.setValue("");
					</qx:eventListener>
				</qx:button>
				<qx:button label="OK">
					<qx:eventListener type="execute">
						errorWindow.hide();
					</qx:eventListener>
				</qx:button>
			</qx:horizontalBoxLayout>
			
		</qx:verticalBoxLayout>	

	</qx:window>
	
</qxt:include-definition>	