<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>qooxdoo &raquo; Demo Browser</title>
  <link type="text/css" rel="stylesheet" href="../../css/layout.css"/>
  <!--[if IE]>
  <link type="text/css" rel="stylesheet" href="../../css/layout_ie.css"/>
  <![endif]-->
  <script type="text/javascript" src="../../script/demo.js"></script>
</head>
<body>

  <script type="text/javascript" src="../util.js"></script>

  <div id="demoDescription">
  </div>

  <script type="text/javascript">
  qx.core.Init.getInstance().defineMain(function()
  {
    var vb = new qx.ui.layout.VerticalBoxLayout;
    vb.set({ top : 50, left : 20, width : "65%", height : "auto", spacing : 20 });
    vb.addToDocument();
    
    var smileyMap = { laugh            : ":-)",
                      twinkle          : ";-)",
                      sad              : ":-(",
                      astonished       : ":-o",
                      laugh_loud       : ":-d",
                      stick_out_tongue : ":-p",
                      speechless       : ":-|",
                      angry            : ":-@",
                      confused         : ":-s",
                      cool_looking     : "8-)",
                      crying           : ":'(",
                      amorous          : ":-x",
                      discreet         : ":-#",
                      disgraced        : ":-$",
                      geek             : "8-|",
                      show_teeth       : "8o|" };
    
    var htmlArea = new qx.ui.form.HtmlArea(null, smileyMap);
    htmlArea.set({ width : "100%", height : 400, messengerMode : true, focused : true });
    //vb.add(htmlArea);
    
    htmlArea.addEventListener("messengerContent", function(e) {
      this.debug("messengerContent: " + e.getData());
    });
    
    var hb = new qx.ui.layout.HorizontalBoxLayout;
    hb.set({ width : "100%", height : "auto", spacing : 10 });
    
    var boldButton = new qx.ui.form.Button("Bold");
    boldButton.addEventListener("execute", function(e){
      this.setBold();
    }, htmlArea);
    
    var italicButton = new qx.ui.form.Button("Italic");
    italicButton.addEventListener("execute", function(e){
      this.setItalic();
    }, htmlArea);
    
    var fontSizeButton = new qx.ui.form.Button("FontSize");
    fontSizeButton.addEventListener("execute", function(e){
      var result = window.prompt("FontSize: ", "");
      this.setFontSize(parseInt(result));
    }, htmlArea);
    
    var colorButton = new qx.ui.form.Button("Color");
    colorButton.addEventListener("execute", function(e){
      var result = window.prompt("Color (Hex): ", "#");
      this.setColor(result);
    }, htmlArea);
    
    var removeFormatButton = new qx.ui.form.Button("Remove format");
    removeFormatButton.addEventListener("execute", function(e){
      this.removeFormat();
    }, htmlArea);
    
    var addSmileyButton = new qx.ui.form.Button("Add smiley");
    addSmileyButton.addEventListener("execute", function(e){
      var result = window.prompt("Smiley: ", "");
      this.insertSmiley(result);
    }, htmlArea);
    
    var setContentButton = new qx.ui.form.Button("getValue");
    setContentButton.addEventListener("execute", function(e){
      alert(this.getValue());
    }, htmlArea);
    
    var getContentButton = new qx.ui.form.Button("getComputedValue");
    getContentButton.addEventListener("execute", function(e){
      alert(this.getComputedValue());
    }, htmlArea);
    
    hb.add(boldButton, italicButton, fontSizeButton, colorButton, removeFormatButton, addSmileyButton, setContentButton, getContentButton);
    
    var hb2 = new qx.ui.layout.HorizontalBoxLayout;
    hb2.set({ width : "100%", height : "auto", spacing : 10 });
    
    var getHtmlButton = new qx.ui.form.Button("getHtml");
    getHtmlButton.addEventListener("execute", function(e){
      var html = htmlArea.getHtml();
      textArea.setValue(textArea.getValue() + "\n" + html);
    }, this);
    
    var innerHtmlButton = new qx.ui.form.Button("innerHtml");
    innerHtmlButton.addEventListener("execute", function(e){
      var html = htmlArea.__doc.body.innerHTML;
      textArea.setValue(textArea.getValue() + "\n" + html);
    }, this);
    
    var clearButton = new qx.ui.form.Button("clearTextarea");
    clearButton.addEventListener("execute", function(e){
      textArea.setValue("");
    }, this);
    
    hb2.add(getHtmlButton, innerHtmlButton, clearButton);
    vb.add(hb, htmlArea, hb2);
    
    var textArea = new qx.ui.form.TextArea;
    textArea.set({ width: "100%", height : 200 });
    vb.add(textArea);
    
//    textArea.addEventListener("appear", function(e) { this.setFocused(true); })
//    htmlArea.addEventListener("appear", function(e) { this.setFocused(true); })
    
    
  });
  </script>
</body>
</html>